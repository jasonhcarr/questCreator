!function(){"use strict";angular.module("questCreator",["ui.router","LocalStorageModule"]).config(function(a,b){b.otherwise("/"),a.state("main",{url:"/",templateUrl:"./src/views/main.html",controller:"mainCtrl as main"}).state("main.game",{url:"game",templateUrl:"./src/views/game.html",controller:"gameCtrl as game"}).state("main.game.play",{url:"play",templateUrl:"./src/views/play.html",controller:"playCtrl as play"}).state("main.game.editor",{url:"editor",templateUrl:"./src/views/editor.html",controller:"editorCtrl as editor"}).state("main.game.editor.map",{url:"map",templateUrl:"./src/views/map.html",controller:"mapCtrl as map"}).state("main.game.editor.scene",{url:"scene",templateUrl:"./src/views/scene.html",controller:"sceneCtrl as scene"}).state("main.game.editor.bg",{url:"bg",templateUrl:"./src/views/bg.html",controller:"bgCtrl as bg"}).state("main.game.editor.obj",{url:"obj",templateUrl:"./src/views/obj.html",controller:"objCtrl as obj"}).state("main.game.editor.ent",{url:"ent",templateUrl:"./src/views/ent.html",controller:"entCtrl as ent"}).state("main.game.editor.scripts",{url:"scripts",templateUrl:"./src/views/scripts.html",controller:"scriptsCtrl as scripts"}).state("main.profile",{url:"profile",templateUrl:"./src/views/profile.html",controller:"profileCtrl as profile"})})}(),angular.module("questCreator").service("socket",function(){var a=io();return{on:function(b,c){a.on(b,c)},emit:function(b,c){a.emit(b,c)},off:function(b,c){a.off(b,c)}}}),angular.module("questCreator").controller("chatCtrl",function(a,b){$("form").submit(function(){return console.log("Submitted!"),a.emit("chat message",$("#m").val()),$("#m").val(""),!1}),a.off("chat message"),a.on("chat message",function(a){$("#messages").append($("<li>").text(a))})}),angular.module("questCreator").controller("gameCtrl",function(a,b,c){var d,e;a.emit("game joined"),a.off("old player found"),a.on("old player found",function(a){console.log("Found old player"),$("<canvas>").attr({id:a.id,class:"avatar",width:"100",height:"100"}).css({position:"absolute",left:a.x,top:a.y,border:"2px solid black",background:a.color}).appendTo("body")}),a.off("new player joining"),a.on("new player joining",function(b){var c={oldCharInfo:e,id:b.id};a.emit("send old player",c),$("<canvas>").attr({id:b.id,class:"avatar",width:"100",height:"100"}).css({position:"absolute",left:b.x,top:b.y,border:"2px solid black",background:b.color}).appendTo("body")}),a.off("updating player"),a.on("updating player",function(a){$("#"+a.id).css({left:a.x,top:a.y})}),a.off("player left"),a.on("player left",function(a){console.log("Player left!"),$("#"+a).remove()});var f;a.off("create character"),a.on("create character",function(b){d=b;var c=Math.round(Math.random()*window.innerWidth),g=Math.round(Math.random()*window.innerHeight),h=0,i=0,j=Math.round(255*Math.random()),k=Math.round(255*Math.random()),l=Math.round(255*Math.random()),m="rgb("+j+", "+k+","+l+")",n={id:b,x:c,y:g,speedX:h,speedY:i,color:m};e=n,a.emit("send new player",e),$("<canvas>").attr({id:b,class:"avatar",width:"100",height:"100"}).css({position:"absolute",left:c,top:g,border:"2px solid black",background:m}).appendTo("body"),f=setInterval(function(){c+=h,g+=i,$("#"+b).css({left:c,top:g}),charUpdate={id:b,x:c,y:g,speedX:h,speedY:i,color:m},a.emit("player update",charUpdate)},20),$("body").off().on("keydown",function(a){var b=a.keyCode;37===b?h+=-1:38===b?i+=-1:39===b?h+=1:40===b&&(i+=1)})}),c.$on("$destroy",function(){$(".avatar").remove(),a.emit("game left"),clearInterval(f)})}),angular.module("questCreator").controller("mainCtrl",function(a,b){}),angular.module("questCreator").controller("profileCtrl",function(a,b,c){});